# Система LIMIT

## Производитель
Softwell

## Описание
Риск потери денежных средств является неотъемлемой частью бизнеса любого банка или инвестиционной компании. Для его оценки разработано множество методик и регламентов, собравших в себе экспертизу по оценке рисков, принимаемых на себя банком в своей ежедневной деятельности.

В настоящее время во многих банках применяются in-house ИТ решения, реализующие методики расчета рисков, основанные на собственной экспертизе или заимствованные из публичных источников. Кроме ограничения в области методологии эти решения имеют еще один важный недостаток — в большинстве случаев информация о величине рисков поступает к риск менеджеру с недопустимым опозданием — на часы или даже сутки, когда риск уже принят и по операции расчеты уже произведены.

Мы предлагаем решение, не имеющее этих недостатков.
LIMIT — продукт, вобравший в себя лучшие практики российских банков и позволяющий управлять рисками в режиме реального времени.

Наличие такой системы управления рисками — одна из самых актуальных задач современного технологически развитого банка.

Отсутствие такого инструмента не позволяет банку безопасно конкурировать — это может привести его к невозможности безопасного развития и, как следствие, к серьезным финансовым потерям.

Единый реестр лимитов
В системе может быть настроена сложная структура лимитов, обеспечивающую контроль лимитов многофилиального банка или группы банков.

Типы лимитов могут интерактивно создаваться и редактироваться, позволяя контролировать лимиты на любом уровне агрегации риска.

Сохраняется история изменений лимитов, а также история использования лимитов на каждую дату.

Проверка в режиме реального времени
Обеспечивается контроль лимитов и авторизацию операций в режиме реального времени — pre и post trade.

При нарушении лимита система оповестит заинтересованных сотрудников о нарушении.

Кроме привычного для большинства банков post trade контроля лимитов система предлагает pre-trade контроль — сервер может автоматически блокировать заявки в торговой системе еще до момента заключения сделки, нарушающей лимит.

Система позволяет контролировать лимиты по операциям всех подразделений банка — не только операций Казначейства.

Управление лимитами
Реализован гибкий механизм перераспределения свободных остатков между лимитами, целевое резервирование свободных остатков лимитов.

Инструментарий системы позволяет реализовать практический регламент контроля лимитов.

В системе реализована ручная авторизация операций уполномоченными сотрудниками — риск менеджер может авторизовать нарушившую лимит операцию (в рамках своих полномочий).

Отчётность
Система отчетности позволяет осуществлять мониторинг процесса контроля лимитов и авторизации операций в режиме реального времени.

Обеспечивается отслеживание истории по событиям с операциями и лимитами.

Лимиты
Развитие рынков породило множество новых продуктов, рисков и методик их расчета.

Со временем методики менялись, требования к процессу контроля лимитов отражали рост экспертизы российских риск менеджеров.
За 10 лет своего развития система LIMIT вобрала в себя все лучшие практики контроля рисков, которые были реализовали на многих проектах внедрения системы.

Система поставляется с готовым к использованию набором формул расчета лимитов, созданных с участием нашими клиентами.

Типы лимитов
Для настройки типа определяются:

Тип ограничения,
Правило отбора операций, которые будут подпадать под лимит данного типа,
Формула, которая будет использоваться при расчете утилизации лимита.
Множество параметров лимита, определяющих отбор операций, влияющих на его использование, не ограничено.
Это может быть комбинация любых параметров сделки, портфеля, позиции, инструмента или их сочетаний:

Контрагент или группа контрагентов, их принадлежность к той или иной отрасли, стране,
Рейтинг контрагента, эмитента, инструмента, рассчитанные агентствами или установленные банком самостоятельно,
Продукт — конверсия, депозит, репо, покупка облигации,
Срок операции,
Инструмент, его дюрация или доля в портфеле,
Другие параметры операции, позиции или портфеля — минимальный дисконт по обратному репо, stop-loss позиции, VaR портфеля ценных бумаг.
В итоге любой набор параметров лимита можно сохранить как тип, привязать к нему формулу и далее на его основе создать экземпляры лимитов.

Справочник формул содержит набор стандартных алгоритмов расчета, который мы поставляем вместе с системой. Эти формулы используются нашими клиентами — вы получаете комплект формул, собравший в себе экспертизу лучших российских банков.

Вы можете дополнить справочник вашими собственными формулами — в дополнение к существующим формулам банк может самостоятельно настраиваться свои собственные типы — на основании его лимитной политики.

Компоненты
Лимит может учитывать несколько компонентов.
Характеристиками каждого компонента являются критерий отбора операций для расчета компонентов и формула расчета компонента, которые задаются пользователем.
Компонент лимита обычно соответствует составляющей риска. Например, в лимите на контрагента может учитывать, как минимум, три составляющие:

риск контрагента (риск непосредственно контрагента),
риск эмитента (риск, связанный с инструментами, эмитентом которых является контрагент),
риск поручителя (риск, связанный с операциями, в которых данный контрагент выступает в качестве поручителя).
Соответственно, лимит должен иметь три компонента:

компонент риска на контрагента,
компонент риска на эмитента,
компонент риска на поручителя.
К каждому компоненту можно привязать формулу, что дает возможность учитывать в одном лимите различные типы рисков, которые формируются различными множествами операций и рассчитываются по соответствующим формулам.

Поскольку множество операций описывается через параметры операций, условия отбора операций для контроля лимитом также основываются на параметрах операций. Возможно также формирования пользовательских параметров, в разрезе которых планируется контролировать лимиты.

Авторизация
Основная задача лимит сервера — авторизовать совершение той или иной операции.
Различные системы банка могут обращаться к лимит серверу для получения авторизации на совершение операции или удовлетворение заявки.

Для всех систем банка Лимит сервер выступает единственным центром компетенции о доступных лимитах.
При получении запроса Лимит сервер проверяет, под какие лимиты подпадает операции, и не нарушает ли она любой из лимитов.

В случае если сделка (заявка) не нарушает ни один из лимитов, сервер авторизует ее, отправляя внешней системе разрешение на ее совершение.

Результаты
Результатами авторизации операции являются следующие объекты:

Статус авторизации операции — возможные значения Авторизована, Не Авторизована,
Причина получения статуса авторизации операции — предоставляется информация о причинах получения статуса авторизации, например, Нарушение лимита, Отсутствие лимита, Авторизована вручную и т.д.,
Множество лимитов, контролирующих операцию — с пересчитанными значениями с учетом данной операции.
Тип проверки
Логика авторизации зависит от типа проверки операции: симуляция, заявка или реальная операция:

Симуляция — фиктивная операция, цель заведения которой в системе - получение информации о возможных нарушениях лимитов в случае заключения аналогичной реальной операции. Симуляция не оказывает влияния на лимиты после ее завершения - изменения лимитов лишь моделируются, и результаты моделирования отправляются на Frontend, откуда была осуществлена симуляция,
Заявка — операция, цель заведения которой в системе - резервирование части свободного остатка лимита (лимитов) для заключения в будущем аналогичной реальной операции. Если заявка получила авторизацию, то заключенная на ее основе реальная сделка не будет проходить повторный контроль лимитов - лимиты уже использованы заявкой и находятся в норме,
Реальная операция — операция, заключаемая трейдером.
Режим авторизации
Для заявки и реальной операции предусматривается два режима авторизации: запретительный контроль и информативный контроль:

В режиме запретительного контроля лимитов по умолчанию в лимитах учитываются только операции со статусом Авторизована,
В режиме информативного контроля лимитов все операции учитываются в лимитах независимо от статуса авторизации - значения лимитов после проверки операции обновляются для всех операций (авторизованных и неавторизованных).
Для логики авторизации в системе предусмотрены широкие возможности для настройки: задание режима контроля авторизации и правила обработки отсутствия лимита, указание множества безрисковых и автоматически блокируемых операций и т.д.

Формулы лимитов
Существует различные классификации банковских рисков. Чаще всего их делят на три группы: кредитные, рыночные, расчетные.

Кредитный риск
Кредитный риск — возможность финансовых потерь вследствие невыполнения обязательств контрагентами, заемщиками. В системе реализовано значительное количество формул, рассчитывающих величину кредитного риска по разным типам продуктов — кредитов, конверсионных операций, операций с ценными бумагами.

В качестве примера можем предложить описание формулы кредитного риска по операции FX Swap, реализованной на одном из проектов внедрения:


Где:

U — использование лимита.
F — множество сделок FX Swap
f — сделка FX Swap
Qf — объем ожидаемой от контрагента суммы по второй части сделки FX Swap
Sf — курс Центрального Банка валюты, в которой выражен объем f, к валюте лимита (количество единиц валюты лимита за 1 единицу валюты объема f).
В рамках различных проектов были также реализованы формулы для расчета кредитного риска по операциям:

Конверсионные операции — Spot, Forward, Netting
Операции с ценными бумагами — покупка / продажа и репо
Риск эмитента
Риск замещения позиции с контрагентом
Остатки на счетах у Ностро корреспондентов
И их возможные комбинации
Для данного типа лимитов предусмотрена настройка способа восполнения лимита.Формулы поддерживают 2 способа высвобождения лимита:

По плановой дате — требование/обязательство перестает учитываться в формуле на следующий день после плановой даты исполнения (возврата кредита или платежа по конверсионной сделке).
По фактическому событию исполнения — требование/обязательство перестает учитываться в формуле после того, как оно получит статус «Исполнено»
вручную в карточке обязательства или
по поступлению события исполнения требования/обязательства из Фронт офиса, модуля Платежи или
по поступлению события исполнения требования/обязательства из Бэк офиса
Рыночный риск
Рыночный риск — возможность финансовых потерь вследствие неблагоприятного развития событий на рынках — процентном, валютном или рынке ценных бумаг.

В качестве примера можем предложить описание формулы расчета стоимости базисного пункта (BPV01) для портфеля, реализованной на одном из проектов внедрения:


Где:

U — использование лимита.
K — множество требований/обязательств по сделкам с данным контрагентом.
k — требование/обязательство Банка, принадлежащее множеству K.
Qk — позиция по облигации k по сделкам, контролируемым данным лимитом.
PV P Bk — Price value of basis point (PV P B) облигации k, приведенный к валюте лимита по курсу Центрального банка. Расчет PVBP для облигации описан в разделе Облигационный калькулятор.Цена базисного пункта.
Sf — рыночный курс облигации k.
В рамках различных проектов были также реализованы формулы для расчета рыночных рисков — процентных, валютных, ценовых:

Stop Loss портфеля или торговой книги
Дюрация портфеля
Доля от объема эмиссии для инструмента
Объем дисконта по множеству сделок репо
VaR портфеля долговых инструментов
Стоимость залога
И другие формулы...
Поставочный риск
Поставочный риск — риск неспособности выполнить свои обязательства по поставке финансового инструмента. В качестве примера можем предложить описание формулы расчета Settlement Risk для всех типов сделок:


Где:

U — использование лимита.
K — множество требований/обязательств по сделкам с данным контрагентом.
k — требование/обязательство Банка, принадлежащее множеству K.
Qk — объем требования/обязательства k с учетом направления: требования учитываются со знаком «+», обязательства — со знаком «-».
Sk — курс Центрального Банка валюты требования/обязательства k к валюте лимита (количество единиц валюты лимита за 1 единицу валюты требования/обязательства k).
В рамках проектов были реализованы различные формулы для расчета поставочных рисков.

Риск отдельных сделок
В системы реализованы формулы, контролирующие различные параметры одиночных сделок. В качестве примера можем предложить описание формулы расчета доходности до погашения по сделке покупки / продажи ценных бумаг.

Формула выглядит следующим образом:

Если направление сделки «Покупка» или «Обратное Репо»


Если направление сделки «Продажа» или «Прямое Репо»


Где:

U — использование лимита.
YTMDeal — Доходность инструмента, рассчитанная на основании цены сделки, даты до погашения инструмента. Доходность рассчитывается на дату "стандартного срока поставки" инструмента, заданного в справочнике финансовых инструментов для этого инструмента.
YTMMarket — Если тип инструмента в сделке - Облигация, то это доходность инструмента, рассчитанная на основании текущей рыночной цены облигации. Тип доходности задается как значение параметра формулы Тип доходности. Если значение этому параметру формулы в лимите не задано, то используется тип доходности, который указан для облигации в справочнике финансовых инструментов для этой облигации. Если же и там тип доходности не задан, то используется тип доходности Simple.Если тип инструмента в сделке - Вексель, то это величина ставки кривой трансфертных ставок, привязанной к эмитенту данного векселя, взятой на срок до погашения векселя. Кривая привязывается к эмитенту в справочнике Бизнес-партнеры. Для сделок покупки используется ставка Ask, для сделок продажи - ставка Bid.
Смысл формулы в том, что покупать инструмент желательно так, что доходность была бы не ниже текущей рыночной доходности, а продавать так - чтобы доходность была бы не выше текущей рыночной доходности.

В рамках проектов были реализованы различные формулы для расчета рисков по одиночным сделкам:

Дисконт по РЕПО
Дюрация инструмента
Маржин кол по РЕПО
Срок сделки
Стоимость базисного пункта (BPV01) для инструмента